"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[6269],{2312:(e,i,t)=>{t.r(i),t.d(i,{Tag:()=>d,assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"api-class-reference/utility/DynamicOctree","title":"DynamicOctree","description":"Module by: Plasmanode\\\\","source":"@site/docs/api-class-reference/utility/DynamicOctree.md","sourceDirName":"api-class-reference/utility","slug":"/api-class-reference/utility/DynamicOctree","permalink":"/RetroBoxDocs/docs/api-class-reference/utility/DynamicOctree","draft":false,"unlisted":false,"editUrl":"https://github.com/NOPESbucket/RetroBox/edit/main/docs/api-class-reference/utility/DynamicOctree.md","tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"sidebar_position":7},"sidebar":"apiSidebar","previous":{"title":"Component","permalink":"/RetroBoxDocs/docs/api-class-reference/utility/Component"},"next":{"title":"Hitbox","permalink":"/RetroBoxDocs/docs/api-class-reference/utility/Hitbox"}}');var n=t(4848),s=t(8453);const o={sidebar_position:7},a=void 0,c={},d=({children:e,color:i})=>(0,n.jsx)("span",{style:{fontSize:"0.75em",backgroundColor:i,borderRadius:"4px",color:"#fff",padding:"0.2rem 0.5rem",fontWeight:"bold"},children:e}),l=[{value:"What are Octrees?",id:"what-are-octrees",level:2},{value:"What this looks like in Roblox",id:"what-this-looks-like-in-roblox",level:2},{value:"Why use Octrees?",id:"why-use-octrees",level:2},{value:"Types",id:"types",level:2},{value:"&gt; OctreeNode",id:"-octreenode",level:3},{value:"Properties",id:"properties",level:2},{value:"&gt; <code>Name: string</code> <Tag>Public</Tag>",id:"-name-string-public",level:3},{value:"&gt; <code>Tree: DOS.Octree</code> <Tag>Public</Tag>",id:"-tree-dosoctree-public",level:3},{value:"&gt; <code>Update: boolean</code> <Tag>Public</Tag>",id:"-update-boolean-public",level:3},{value:"&gt; <code>Entires: {unknown}</code> <Tag>Private</Tag>",id:"-entires-unknown-private",level:3},{value:"&gt; <code>Tracked: {unknown}</code> <Tag>Private</Tag>",id:"-tracked-unknown-private",level:3},{value:"Constructor",id:"constructor",level:2},{value:"&gt; <code>DOS.New(name: string, depth: number | 4, size: number | 512)</code>",id:"-dosnewname-string-depth-number--4-size-number--512",level:3},{value:"Methods",id:"methods",level:2},{value:"<code>Grid:Add(instance: any, position: Vector3)</code> <Tag>Public</Tag>",id:"gridaddinstance-any-position-vector3-public",level:3},{value:"<code>Grid:AddStatic(instance: any, position: Vector3)</code> <Tag>Public</Tag>",id:"gridaddstaticinstance-any-position-vector3-public",level:3},{value:"<code>Grid:UpdateFor(instance: any, position: Vector3)</code> <Tag>Public</Tag>",id:"gridupdateforinstance-any-position-vector3-public",level:3},{value:"<code>Grid:Track(instance: any, updateFrequency: number | 0.1)</code> <Tag>Public</Tag>",id:"gridtrackinstance-any-updatefrequency-number--01-public",level:3},{value:"<code>Grid:RadiusSearch(position: Vector3, radius: number) -&gt; ({T}, {number})</code> <Tag>Public</Tag>",id:"gridradiussearchposition-vector3-radius-number---t-number-public",level:3},{value:"<code>Grid:GetAllNodes(): {OctreeNode&lt;T&gt;}</code> <Tag>Public</Tag>",id:"gridgetallnodes-octreenodet-public",level:3},{value:"<code>Grid:Destroy()</code> <Tag>Public</Tag>",id:"griddestroy-public",level:3}];function u(e){const i={a:"a",admonition:"admonition",br:"br",code:"code",h2:"h2",h3:"h3",hr:"hr",img:"img",p:"p",pre:"pre",strong:"strong",...(0,s.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(i.p,{children:[(0,n.jsx)(i.code,{children:"Module by: Plasmanode"}),(0,n.jsx)(i.br,{}),"\n",(0,n.jsxs)(i.strong,{children:["Official DevForum ",(0,n.jsx)(i.a,{href:"https://devforum.roblox.com/t/dynamic-octree-system/2177042",children:"post"})]})]}),"\n",(0,n.jsxs)(i.p,{children:["Dynamic Octree System (DOS) - expansion of ",(0,n.jsx)(i.a,{href:"https://quenty.github.io/NevermoreEngine/api/Octree/",children:"Quenty\u2019s Octree module"})," and makes it easy to track dynamic, moving objects. According to Quenty, Octrees work best for static objects (objects that are staying still), however they can still be used with moving objects.\r\nThis module is actually pretty simple! It lets you register objects to the Octree, so that when you update them it automatically removes the node at it\u2019s old position."]}),"\n",(0,n.jsx)(i.h2,{id:"what-are-octrees",children:"What are Octrees?"}),"\n",(0,n.jsx)(i.p,{children:"In essence, an Octree is sort of like a recursive chunk system."}),"\n",(0,n.jsx)(i.p,{children:"An octree is a tree data structure in which each internal node has exactly eight children. Octrees are most often used to partition a three-dimensional space by recursively subdividing it into eight octants."}),"\n",(0,n.jsxs)(i.p,{children:[(0,n.jsx)(i.img,{src:"https://devforum-uploads.s3.dualstack.us-east-2.amazonaws.com/uploads/optimized/5X/e/c/4/3/ec4384970592733fa1afd8d3b5c726fd23d74e46_2_690x419.png",alt:"Octree visualization"}),(0,n.jsx)(i.br,{}),"\n","Basically, it\u2019s useful because if you have a huge area, instead of filling it with a ton of small, precise chunks and sacrificing performance, or a few big chunks and sacrificing fidelity, you can create an Octree and it will automatically subdivide! Better yet, if nothing exists in a particular area\u2026 there won\u2019t be any grid sections there! Saves memory!"]}),"\n",(0,n.jsx)(i.h2,{id:"what-this-looks-like-in-roblox",children:"What this looks like in Roblox"}),"\n",(0,n.jsxs)(i.p,{children:["Here\u2019s a visualization I threw together. I am working on updating the Draw module included (made by Quenty), so we can visualize Dynamic Octrees in real time, and in a way that looks prettier and easier to see.\r\n",(0,n.jsx)(i.img,{src:"https://devforum-uploads.s3.dualstack.us-east-2.amazonaws.com/uploads/original/5X/9/9/9/b/999b318e1b4d2487b28db775a266d57976839f48.jpeg",alt:"Roblox octree example 1"}),"\r\n",(0,n.jsx)(i.img,{src:"https://devforum-uploads.s3.dualstack.us-east-2.amazonaws.com/uploads/original/5X/1/4/0/4/1404d9c1744afb19cef207d215bc992150c4d54e.jpeg",alt:"Roblox octree example 2"})]}),"\n",(0,n.jsx)(i.h2,{id:"why-use-octrees",children:"Why use Octrees?"}),"\n",(0,n.jsxs)(i.p,{children:[(0,n.jsx)(i.strong,{children:"Octrees are a very fast way to handle searching for nearby objects."})," For example, if you need to compute collisions, instead of first checking the distance between every object and the player, you first see what objects are within a certain radius using ",(0,n.jsx)(i.code,{children:"Octree:RadiusSearch(Pos, Dist)"}),", to get nearby objects. It\u2019s pretty sweet!"]}),"\n",(0,n.jsx)(i.pre,{children:(0,n.jsx)(i.code,{className:"language-lua",metastring:'title="ServerScriptService/OctreeExample.server.lua"',children:'local DOS = require(pathToDOSModule);\r\n\r\nlocal Grid = DOS.New("Players", 4, 100);\r\n\r\ngame.Players.PlayerAdded:Connect(function (Player)\r\n\tlocal tracker;\r\n\r\n\tPlayer.CharacterAdded:Connect(function (Character)\r\n\t\ttracker = Grid:Track(Character.HumanoidRootPart, 0.1); -- Remember that using Grid:Track is not ideal for a large amount of objects. Better in this case to make a big loop to update for all players, or update only when movement events are fired.\r\n\tend);\r\n\r\n\tPlayer.CharacterRemoving:Connect(function (Character)\r\n\t\tif (tracker) then\r\n\t\t\ttracker:Destroy();\r\n\t\tend\r\n\tend);\r\nend);\r\n\r\n\r\nwhile true do\r\n\ttask.wait(1);\r\n\t\r\n\tlocal nearby = Grid:RadiusSearch(Vector3.zero, 50);\r\n\tprint("Nearby entities: ", nearby)\r\nend\n'})}),"\n",(0,n.jsx)(i.h2,{id:"types",children:"Types"}),"\n",(0,n.jsx)(i.hr,{}),"\n",(0,n.jsxs)(i.h3,{id:"-octreenode",children:["> ",(0,n.jsx)(i.a,{href:"https://quenty.github.io/NevermoreEngine/api/OctreeNode",children:"OctreeNode"})]}),"\n",(0,n.jsx)(i.h2,{id:"properties",children:"Properties"}),"\n",(0,n.jsx)(i.hr,{}),"\n",(0,n.jsxs)(i.h3,{id:"-name-string-public",children:["> ",(0,n.jsx)(i.code,{children:"Name: string"})," ",(0,n.jsx)(d,{color:"#e3ce8b",children:"Public"})]}),"\n",(0,n.jsx)(i.p,{children:"Name of the Octree Grid."}),"\n",(0,n.jsx)(i.hr,{}),"\n",(0,n.jsxs)(i.h3,{id:"-tree-dosoctree-public",children:["> ",(0,n.jsx)(i.code,{children:"Tree: DOS.Octree"})," ",(0,n.jsx)(d,{color:"#e3ce8b",children:"Public"})]}),"\n",(0,n.jsx)(i.hr,{}),"\n",(0,n.jsxs)(i.h3,{id:"-update-boolean-public",children:["> ",(0,n.jsx)(i.code,{children:"Update: boolean"})," ",(0,n.jsx)(d,{color:"#e3ce8b",children:"Public"})]}),"\n",(0,n.jsx)(i.p,{children:"Enables/disables tracked entry updates."}),"\n",(0,n.jsx)(i.hr,{}),"\n",(0,n.jsxs)(i.h3,{id:"-entires-unknown-private",children:["> ",(0,n.jsx)(i.code,{children:"Entires: {unknown}"})," ",(0,n.jsx)(d,{color:"#4958df",children:"Private"})]}),"\n",(0,n.jsx)(i.hr,{}),"\n",(0,n.jsxs)(i.h3,{id:"-tracked-unknown-private",children:["> ",(0,n.jsx)(i.code,{children:"Tracked: {unknown}"})," ",(0,n.jsx)(d,{color:"#4958df",children:"Private"})]}),"\n",(0,n.jsx)(i.h2,{id:"constructor",children:"Constructor"}),"\n",(0,n.jsx)(i.hr,{}),"\n",(0,n.jsxs)(i.h3,{id:"-dosnewname-string-depth-number--4-size-number--512",children:["> ",(0,n.jsx)(i.code,{children:"DOS.New(name: string, depth: number | 4, size: number | 512)"})]}),"\n",(0,n.jsx)(i.h2,{id:"methods",children:"Methods"}),"\n",(0,n.jsx)(i.hr,{}),"\n",(0,n.jsxs)(i.h3,{id:"gridaddinstance-any-position-vector3-public",children:[(0,n.jsx)(i.code,{children:"Grid:Add(instance: any, position: Vector3)"})," ",(0,n.jsx)(d,{color:"#e3ce8b",children:"Public"})]}),"\n",(0,n.jsx)(i.p,{children:"Adds item entry to the octree with specified position."}),"\n",(0,n.jsx)(i.hr,{}),"\n",(0,n.jsxs)(i.h3,{id:"gridaddstaticinstance-any-position-vector3-public",children:[(0,n.jsx)(i.code,{children:"Grid:AddStatic(instance: any, position: Vector3)"})," ",(0,n.jsx)(d,{color:"#e3ce8b",children:"Public"})]}),"\n",(0,n.jsx)(i.p,{children:"Adds static item entry to the octree with specified position. Static entries will not be destroyed or moved within the lifespan of the DOS grid."}),"\n",(0,n.jsx)(i.hr,{}),"\n",(0,n.jsxs)(i.h3,{id:"gridupdateforinstance-any-position-vector3-public",children:[(0,n.jsx)(i.code,{children:"Grid:UpdateFor(instance: any, position: Vector3)"})," ",(0,n.jsx)(d,{color:"#e3ce8b",children:"Public"})]}),"\n",(0,n.jsx)(i.p,{children:"Updates item entry position for specified instance."}),"\n",(0,n.jsx)(i.hr,{}),"\n",(0,n.jsxs)(i.h3,{id:"gridtrackinstance-any-updatefrequency-number--01-public",children:[(0,n.jsx)(i.code,{children:"Grid:Track(instance: any, updateFrequency: number | 0.1)"})," ",(0,n.jsx)(d,{color:"#e3ce8b",children:"Public"})]}),"\n",(0,n.jsx)(i.p,{children:"Starts updating item entry with specified update frequency (default is 0.1)."}),"\n",(0,n.jsx)(i.admonition,{type:"warning",children:(0,n.jsx)(i.p,{children:"This is mainly for convenience, and should not be relied on or used for a large number of entries. It\u2019s useful because you can give it an instance,\r\nincluding a model (so long as it has a primary part) and a set interval at how often it should update. For a large number of dynamic entries,\r\nit is best to implement your own update solution."})}),"\n",(0,n.jsx)(i.hr,{}),"\n",(0,n.jsxs)(i.h3,{id:"gridradiussearchposition-vector3-radius-number---t-number-public",children:[(0,n.jsx)(i.code,{children:"Grid:RadiusSearch(position: Vector3, radius: number) -> ({T}, {number})"})," ",(0,n.jsx)(d,{color:"#e3ce8b",children:"Public"})]}),"\n",(0,n.jsx)(i.p,{children:"Performs radial search at specified position. Returns a tuble with array of item entries and array of distances of these item entries, if they are in radius."}),"\n",(0,n.jsx)(i.hr,{}),"\n",(0,n.jsxs)(i.h3,{id:"gridgetallnodes-octreenodet-public",children:[(0,n.jsx)(i.code,{children:"Grid:GetAllNodes(): {OctreeNode<T>}"})," ",(0,n.jsx)(d,{color:"#e3ce8b",children:"Public"})]}),"\n",(0,n.jsx)(i.p,{children:"Returns array of all nodes in Octree Grid."}),"\n",(0,n.jsx)(i.hr,{}),"\n",(0,n.jsxs)(i.h3,{id:"griddestroy-public",children:[(0,n.jsx)(i.code,{children:"Grid:Destroy()"})," ",(0,n.jsx)(d,{color:"#e3ce8b",children:"Public"})]}),"\n",(0,n.jsx)(i.p,{children:"Destroy's the Octree Grid, releasing it from memory."}),"\n",(0,n.jsx)(i.hr,{})]})}function h(e={}){const{wrapper:i}={...(0,s.R)(),...e.components};return i?(0,n.jsx)(i,{...e,children:(0,n.jsx)(u,{...e})}):u(e)}},8453:(e,i,t)=>{t.d(i,{R:()=>o,x:()=>a});var r=t(6540);const n={},s=r.createContext(n);function o(e){const i=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function a(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:o(e.components),r.createElement(s.Provider,{value:i},e.children)}}}]);